/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/process/route";
exports.ids = ["app/api/process/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_edwarddeng_repos_hackathon2_0_src_app_api_process_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/process/route.ts */ \"(rsc)/./src/app/api/process/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/process/route\",\n        pathname: \"/api/process\",\n        filename: \"route\",\n        bundlePath: \"app/api/process/route\"\n    },\n    resolvedPagePath: \"/Users/edwarddeng/repos/hackathon2.0/src/app/api/process/route.ts\",\n    nextConfigOutput,\n    userland: _Users_edwarddeng_repos_hackathon2_0_src_app_api_process_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/process/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9jZXNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9jZXNzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvY2VzcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmVkd2FyZGRlbmclMkZyZXBvcyUyRmhhY2thdGhvbjIuMCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZlZHdhcmRkZW5nJTJGcmVwb3MlMkZoYWNrYXRob24yLjAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUI7QUFDOUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWNrYXRob24yLjAvP2U0M2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2Vkd2FyZGRlbmcvcmVwb3MvaGFja2F0aG9uMi4wL3NyYy9hcHAvYXBpL3Byb2Nlc3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2Nlc3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9jZXNzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9jZXNzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2Vkd2FyZGRlbmcvcmVwb3MvaGFja2F0aG9uMi4wL3NyYy9hcHAvYXBpL3Byb2Nlc3Mvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvY2Vzcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/process/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/process/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! microsoft-cognitiveservices-speech-sdk */ \"(rsc)/./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk.js\");\n/* harmony import */ var microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\n// Load credentials from environment variables\nconst endpoint = process.env.AZURE_OPENAI_ENDPOINT;\nconst apiKey = process.env.AZURE_OPENAI_KEY;\nconst deployment = process.env.AZURE_OPENAI_DEPLOYMENT_ID || \"gpt-4o\";\nconst apiVersion = \"2025-01-01-preview\";\nconst speechKey = process.env.AZURE_SPEECH_KEY;\nconst speechRegion = process.env.AZURE_SPEECH_REGION;\nasync function POST(req) {\n    try {\n        const formData = await req.formData();\n        const imageDataUrl = formData.get(\"image\");\n        const detailLevel = formData.get(\"detailLevel\") || \"low\";\n        const audioBlob = formData.get(\"audio\");\n        let imageDescription = \"\";\n        let audioText = \"\";\n        console.log(`[API] Received request. Image: ${!!imageDataUrl}, Audio: ${!!audioBlob}, Detail: ${detailLevel}`);\n        // 1. Process Image with Azure OpenAI (GPT-4o)\n        if (imageDataUrl && imageDataUrl.startsWith(\"data:image\")) {\n            // SAVE IMAGE TO DISK (img folder)\n            try {\n                const base64Data = imageDataUrl.replace(/^data:image\\/\\w+;base64,/, \"\");\n                const buffer = Buffer.from(base64Data, \"base64\");\n                const timestamp = Date.now();\n                const filename = `capture_${timestamp}.jpg`;\n                const filepath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"img\", filename);\n                // Ensure directory exists (redundant if mkdir was run, but safe)\n                const dir = path__WEBPACK_IMPORTED_MODULE_3___default().dirname(filepath);\n                if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(dir)) {\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(dir, {\n                        recursive: true\n                    });\n                }\n                fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(filepath, buffer);\n                console.log(`[API] Saved captured image to: ${filepath}`);\n            } catch (saveError) {\n                console.error(\"[API] Failed to save image to disk:\", saveError);\n            }\n            if (!endpoint || !apiKey) {\n                console.error(\"[API] Missing Azure OpenAI credentials\");\n                throw new Error(\"Azure OpenAI credentials not configured\");\n            }\n            console.log(`[API] Sending image to Azure OpenAI (${deployment})...`);\n            const client = new openai__WEBPACK_IMPORTED_MODULE_1__.AzureOpenAI({\n                endpoint,\n                apiKey,\n                apiVersion,\n                deployment\n            });\n            const response = await client.chat.completions.create({\n                model: deployment,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a concise visual assistant for the deaf-blind. Describe the most important thing in the image in 3-5 words only.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: imageDataUrl,\n                                    detail: detailLevel\n                                }\n                            }\n                        ]\n                    }\n                ],\n                max_tokens: 20,\n                temperature: 0.5\n            });\n            imageDescription = response.choices[0].message?.content || \"\";\n            console.log(`[API] Azure OpenAI Response: \"${imageDescription}\"`);\n        }\n        // 2. Process Audio with Azure Speech SDK\n        // Note: This expects the audioBlob to be in a format the SDK can handle (usually PCM/WAV).\n        // Browsers often send WebM. If this fails, client-side transcoding to WAV/PCM is needed.\n        if (audioBlob && speechKey && speechRegion) {\n            try {\n                const text = await processAudio(audioBlob, speechKey, speechRegion);\n                if (text) {\n                    audioText = text;\n                }\n            } catch (err) {\n                console.error(\"Speech processing warning:\", err);\n            // Do not fail the whole request if audio fails\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            imageDescription,\n            audioText\n        });\n    } catch (error) {\n        console.error(\"Processing Error:\", error.message);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error.message || \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function processAudio(audioBlob, key, region) {\n    const arrayBuffer = await audioBlob.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    // Create temp file\n    const tempFilePath = path__WEBPACK_IMPORTED_MODULE_3___default().join(os__WEBPACK_IMPORTED_MODULE_5___default().tmpdir(), `audio_${Date.now()}.webm`);\n    fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(tempFilePath, buffer);\n    // Create the push stream\n    const pushStream = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__.AudioInputStream.createPushStream();\n    // Spawn ffmpeg to convert to PCM\n    // ffmpeg -i input.webm -f s16le -acodec pcm_s16le -ac 1 -ar 16000 pipe:1\n    const ffmpeg = (0,child_process__WEBPACK_IMPORTED_MODULE_4__.spawn)(\"ffmpeg\", [\n        \"-i\",\n        tempFilePath,\n        \"-f\",\n        \"s16le\",\n        \"-acodec\",\n        \"pcm_s16le\",\n        \"-ac\",\n        \"1\",\n        \"-ar\",\n        \"16000\",\n        \"pipe:1\"\n    ]);\n    ffmpeg.stdout.on(\"data\", (chunk)=>{\n        // Write array buffer to push stream\n        // Ensure we send the correct slice of the buffer\n        const arrayBuf = chunk.buffer.slice(chunk.byteOffset, chunk.byteOffset + chunk.byteLength);\n        pushStream.write(arrayBuf);\n    });\n    ffmpeg.stderr.on(\"data\", (data)=>{\n    // console.error(`ffmpeg stderr: ${data}`);\n    });\n    ffmpeg.on(\"close\", (code)=>{\n        console.log(`[API] ffmpeg exited with code ${code}`);\n        pushStream.close();\n        // Cleanup temp file\n        try {\n            if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(tempFilePath)) fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(tempFilePath);\n        } catch (e) {\n            console.error(\"Error deleting temp file:\", e);\n        }\n    });\n    // Configure for audio input\n    const audioConfig = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__.AudioConfig.fromStreamInput(pushStream);\n    const speechConfig = microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__.SpeechConfig.fromSubscription(key, region);\n    speechConfig.speechRecognitionLanguage = \"en-US\";\n    const recognizer = new microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__.SpeechRecognizer(speechConfig, audioConfig);\n    return new Promise((resolve, reject)=>{\n        recognizer.recognizeOnceAsync((result)=>{\n            recognizer.close();\n            if (result.reason === microsoft_cognitiveservices_speech_sdk__WEBPACK_IMPORTED_MODULE_6__.ResultReason.RecognizedSpeech) {\n                resolve(result.text);\n            } else {\n                console.log(\"Speech recognition failed or no speech:\", result.errorDetails);\n                resolve(\"\");\n            }\n        }, (err)=>{\n            recognizer.close();\n            console.error(\"Recognizer error:\", err);\n            reject(err);\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcm9jZXNzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDbkI7QUFDeUI7QUFDMUM7QUFDSTtBQUNjO0FBQ2xCO0FBRXBCLDhDQUE4QztBQUM5QyxNQUFNTyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQjtBQUNsRCxNQUFNQyxTQUFTSCxRQUFRQyxHQUFHLENBQUNHLGdCQUFnQjtBQUMzQyxNQUFNQyxhQUFhTCxRQUFRQyxHQUFHLENBQUNLLDBCQUEwQixJQUFJO0FBQzdELE1BQU1DLGFBQWE7QUFFbkIsTUFBTUMsWUFBWVIsUUFBUUMsR0FBRyxDQUFDUSxnQkFBZ0I7QUFDOUMsTUFBTUMsZUFBZVYsUUFBUUMsR0FBRyxDQUFDVSxtQkFBbUI7QUFFN0MsZUFBZUMsS0FBS0MsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLFdBQVcsTUFBTUQsSUFBSUMsUUFBUTtRQUNuQyxNQUFNQyxlQUFlRCxTQUFTRSxHQUFHLENBQUM7UUFDbEMsTUFBTUMsY0FBYyxTQUFVRCxHQUFHLENBQUMsa0JBQTZCO1FBQy9ELE1BQU1FLFlBQVlKLFNBQVNFLEdBQUcsQ0FBQztRQUUvQixJQUFJRyxtQkFBbUI7UUFDdkIsSUFBSUMsWUFBWTtRQUVoQkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsK0JBQStCLEVBQUUsQ0FBQyxDQUFDUCxhQUFhLFNBQVMsRUFBRSxDQUFDLENBQUNHLFVBQVUsVUFBVSxFQUFFRCxZQUFZLENBQUM7UUFFN0csOENBQThDO1FBQzlDLElBQUlGLGdCQUFnQkEsYUFBYVEsVUFBVSxDQUFDLGVBQWU7WUFFekQsa0NBQWtDO1lBQ2xDLElBQUk7Z0JBQ0YsTUFBTUMsYUFBYVQsYUFBYVUsT0FBTyxDQUFDLDRCQUE0QjtnQkFDcEUsTUFBTUMsU0FBU0MsT0FBT0MsSUFBSSxDQUFDSixZQUFZO2dCQUN2QyxNQUFNSyxZQUFZQyxLQUFLQyxHQUFHO2dCQUMxQixNQUFNQyxXQUFXLENBQUMsUUFBUSxFQUFFSCxVQUFVLElBQUksQ0FBQztnQkFDM0MsTUFBTUksV0FBV3JDLGdEQUFTLENBQUNJLFFBQVFtQyxHQUFHLElBQUksT0FBT0g7Z0JBRWpELGlFQUFpRTtnQkFDakUsTUFBTUksTUFBTXhDLG1EQUFZLENBQUNxQztnQkFDekIsSUFBSSxDQUFDdEMsb0RBQWEsQ0FBQ3lDLE1BQUs7b0JBQ3BCekMsbURBQVksQ0FBQ3lDLEtBQUs7d0JBQUVJLFdBQVc7b0JBQUs7Z0JBQ3hDO2dCQUVBN0MsdURBQWdCLENBQUNzQyxVQUFVUDtnQkFDM0JMLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLCtCQUErQixFQUFFVyxTQUFTLENBQUM7WUFDMUQsRUFBRSxPQUFPUyxXQUFXO2dCQUNsQnJCLFFBQVFzQixLQUFLLENBQUMsdUNBQXVDRDtZQUN2RDtZQUVBLElBQUksQ0FBQzNDLFlBQVksQ0FBQ0ksUUFBUTtnQkFDeEJrQixRQUFRc0IsS0FBSyxDQUFDO2dCQUNkLE1BQU0sSUFBSUMsTUFBTTtZQUNsQjtZQUVBdkIsUUFBUUMsR0FBRyxDQUFDLENBQUMscUNBQXFDLEVBQUVqQixXQUFXLElBQUksQ0FBQztZQUVwRSxNQUFNd0MsU0FBUyxJQUFJcEQsK0NBQVdBLENBQUM7Z0JBQzdCTTtnQkFDQUk7Z0JBQ0FJO2dCQUNBRjtZQUNGO1lBRUEsTUFBTXlDLFdBQVcsTUFBTUQsT0FBT0UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztnQkFDcERDLE9BQU83QztnQkFDUDhDLFVBQVU7b0JBQ1I7d0JBQ0VDLE1BQU07d0JBQ05DLFNBQVM7b0JBQ1g7b0JBQ0E7d0JBQ0VELE1BQU07d0JBQ05DLFNBQVM7NEJBQ1A7Z0NBQ0VDLE1BQU07Z0NBQ05DLFdBQVc7b0NBQ1RDLEtBQUt6QztvQ0FDTDBDLFFBQVF4QztnQ0FDVjs0QkFDRjt5QkFDRDtvQkFDSDtpQkFDRDtnQkFDRHlDLFlBQVk7Z0JBQ1pDLGFBQWE7WUFDZjtZQUVBeEMsbUJBQW1CMkIsU0FBU2MsT0FBTyxDQUFDLEVBQUUsQ0FBQ0MsT0FBTyxFQUFFUixXQUFXO1lBQzNEaEMsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUVILGlCQUFpQixDQUFDLENBQUM7UUFDbEU7UUFFQSx5Q0FBeUM7UUFDekMsMkZBQTJGO1FBQzNGLHlGQUF5RjtRQUN6RixJQUFJRCxhQUFhVixhQUFhRSxjQUFjO1lBQzFDLElBQUk7Z0JBQ0YsTUFBTW9ELE9BQU8sTUFBTUMsYUFBYTdDLFdBQVdWLFdBQVdFO2dCQUN0RCxJQUFJb0QsTUFBTTtvQkFDUjFDLFlBQVkwQztnQkFDZDtZQUNGLEVBQUUsT0FBT0UsS0FBSztnQkFDWjNDLFFBQVFzQixLQUFLLENBQUMsOEJBQThCcUI7WUFDNUMsK0NBQStDO1lBQ2pEO1FBQ0Y7UUFFQSxPQUFPeEUsa0ZBQVlBLENBQUN5RSxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVC9DO1lBQ0FDO1FBQ0Y7SUFDRixFQUFFLE9BQU91QixPQUFZO1FBQ25CdEIsUUFBUXNCLEtBQUssQ0FBQyxxQkFBcUJBLE1BQU1rQixPQUFPO1FBQ2hELE9BQU9yRSxrRkFBWUEsQ0FBQ3lFLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPdkIsT0FBT0EsTUFBTWtCLE9BQU8sSUFBSTtRQUF3QixHQUNsRTtZQUFFTSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLGVBQWVKLGFBQWE3QyxTQUFlLEVBQUVrRCxHQUFXLEVBQUVDLE1BQWM7SUFDdEUsTUFBTUMsY0FBYyxNQUFNcEQsVUFBVW9ELFdBQVc7SUFDL0MsTUFBTTVDLFNBQVNDLE9BQU9DLElBQUksQ0FBQzBDO0lBRTNCLG1CQUFtQjtJQUNuQixNQUFNQyxlQUFlM0UsZ0RBQVMsQ0FBQ0UsZ0RBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRWdDLEtBQUtDLEdBQUcsR0FBRyxLQUFLLENBQUM7SUFDdEVwQyx1REFBZ0IsQ0FBQzRFLGNBQWM3QztJQUUvQix5QkFBeUI7SUFDekIsTUFBTStDLGFBQWEvRSxvRkFBb0IsQ0FBQ2lGLGdCQUFnQjtJQUV4RCxpQ0FBaUM7SUFDakMseUVBQXlFO0lBQ3pFLE1BQU1DLFNBQVMvRSxvREFBS0EsQ0FBQyxVQUFVO1FBQzdCO1FBQU0wRTtRQUNOO1FBQU07UUFDTjtRQUFXO1FBQ1g7UUFBTztRQUNQO1FBQU87UUFDUDtLQUNEO0lBRURLLE9BQU9DLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLFFBQVEsQ0FBQ0M7UUFDeEIsb0NBQW9DO1FBQ3BDLGlEQUFpRDtRQUNqRCxNQUFNQyxXQUFXRCxNQUFNckQsTUFBTSxDQUFDdUQsS0FBSyxDQUFDRixNQUFNRyxVQUFVLEVBQUVILE1BQU1HLFVBQVUsR0FBR0gsTUFBTUksVUFBVTtRQUN6RlYsV0FBV1csS0FBSyxDQUFDSjtJQUNuQjtJQUVBSixPQUFPUyxNQUFNLENBQUNQLEVBQUUsQ0FBQyxRQUFRLENBQUNRO0lBQ3ZCLDJDQUEyQztJQUM5QztJQUVBVixPQUFPRSxFQUFFLENBQUMsU0FBUyxDQUFDUztRQUNqQmxFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDhCQUE4QixFQUFFaUUsS0FBSyxDQUFDO1FBQ25EZCxXQUFXZSxLQUFLO1FBQ2hCLG9CQUFvQjtRQUNwQixJQUFJO1lBQ0EsSUFBSTdGLG9EQUFhLENBQUM0RSxlQUFlNUUsb0RBQWEsQ0FBQzRFO1FBQ25ELEVBQUUsT0FBTW1CLEdBQUc7WUFDUHJFLFFBQVFzQixLQUFLLENBQUMsNkJBQTZCK0M7UUFDL0M7SUFDSDtJQUVBLDRCQUE0QjtJQUM1QixNQUFNQyxjQUFjakcsK0VBQWUsQ0FBQ21HLGVBQWUsQ0FBQ3BCO0lBQ3BELE1BQU1xQixlQUFlcEcsZ0ZBQWdCLENBQUNzRyxnQkFBZ0IsQ0FBQzVCLEtBQUtDO0lBQzVEeUIsYUFBYUcseUJBQXlCLEdBQUc7SUFFekMsTUFBTUMsYUFBYSxJQUFJeEcsb0ZBQW9CLENBQUNvRyxjQUFjSDtJQUUxRCxPQUFPLElBQUlTLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDM0JKLFdBQVdLLGtCQUFrQixDQUMzQixDQUFDQztZQUNDTixXQUFXVixLQUFLO1lBQ2hCLElBQUlnQixPQUFPQyxNQUFNLEtBQUsvRyxnRkFBZ0IsQ0FBQ2lILGdCQUFnQixFQUFFO2dCQUN2RE4sUUFBUUcsT0FBTzFDLElBQUk7WUFDckIsT0FBTztnQkFDTHpDLFFBQVFDLEdBQUcsQ0FBQywyQ0FBMkNrRixPQUFPSSxZQUFZO2dCQUMxRVAsUUFBUTtZQUNWO1FBQ0YsR0FDQSxDQUFDckM7WUFDQ2tDLFdBQVdWLEtBQUs7WUFDaEJuRSxRQUFRc0IsS0FBSyxDQUFDLHFCQUFxQnFCO1lBQ25Dc0MsT0FBT3RDO1FBQ1Q7SUFFSjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFja2F0aG9uMi4wLy4vc3JjL2FwcC9hcGkvcHJvY2Vzcy9yb3V0ZS50cz82YWYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IEF6dXJlT3BlbkFJIH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0ICogYXMgc2RrIGZyb20gXCJtaWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNka1wiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IHNwYXduIH0gZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCBvcyBmcm9tIFwib3NcIjtcblxuLy8gTG9hZCBjcmVkZW50aWFscyBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3QgZW5kcG9pbnQgPSBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfRU5EUE9JTlQ7XG5jb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfS0VZO1xuY29uc3QgZGVwbG95bWVudCA9IHByb2Nlc3MuZW52LkFaVVJFX09QRU5BSV9ERVBMT1lNRU5UX0lEIHx8IFwiZ3B0LTRvXCI7XG5jb25zdCBhcGlWZXJzaW9uID0gXCIyMDI1LTAxLTAxLXByZXZpZXdcIjtcblxuY29uc3Qgc3BlZWNoS2V5ID0gcHJvY2Vzcy5lbnYuQVpVUkVfU1BFRUNIX0tFWTtcbmNvbnN0IHNwZWVjaFJlZ2lvbiA9IHByb2Nlc3MuZW52LkFaVVJFX1NQRUVDSF9SRUdJT047XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpO1xuICAgIGNvbnN0IGltYWdlRGF0YVVybCA9IGZvcm1EYXRhLmdldChcImltYWdlXCIpIGFzIHN0cmluZyB8IG51bGw7XG4gICAgY29uc3QgZGV0YWlsTGV2ZWwgPSAoZm9ybURhdGEuZ2V0KFwiZGV0YWlsTGV2ZWxcIikgYXMgc3RyaW5nKSB8fCBcImxvd1wiO1xuICAgIGNvbnN0IGF1ZGlvQmxvYiA9IGZvcm1EYXRhLmdldChcImF1ZGlvXCIpIGFzIEJsb2IgfCBudWxsO1xuXG4gICAgbGV0IGltYWdlRGVzY3JpcHRpb24gPSBcIlwiO1xuICAgIGxldCBhdWRpb1RleHQgPSBcIlwiO1xuXG4gICAgY29uc29sZS5sb2coYFtBUEldIFJlY2VpdmVkIHJlcXVlc3QuIEltYWdlOiAkeyEhaW1hZ2VEYXRhVXJsfSwgQXVkaW86ICR7ISFhdWRpb0Jsb2J9LCBEZXRhaWw6ICR7ZGV0YWlsTGV2ZWx9YCk7XG5cbiAgICAvLyAxLiBQcm9jZXNzIEltYWdlIHdpdGggQXp1cmUgT3BlbkFJIChHUFQtNG8pXG4gICAgaWYgKGltYWdlRGF0YVVybCAmJiBpbWFnZURhdGFVcmwuc3RhcnRzV2l0aChcImRhdGE6aW1hZ2VcIikpIHtcbiAgICAgIFxuICAgICAgLy8gU0FWRSBJTUFHRSBUTyBESVNLIChpbWcgZm9sZGVyKVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmFzZTY0RGF0YSA9IGltYWdlRGF0YVVybC5yZXBsYWNlKC9eZGF0YTppbWFnZVxcL1xcdys7YmFzZTY0LC8sIFwiXCIpO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYGNhcHR1cmVfJHt0aW1lc3RhbXB9LmpwZ2A7XG4gICAgICAgIGNvbnN0IGZpbGVwYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdpbWcnLCBmaWxlbmFtZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnN1cmUgZGlyZWN0b3J5IGV4aXN0cyAocmVkdW5kYW50IGlmIG1rZGlyIHdhcyBydW4sIGJ1dCBzYWZlKVxuICAgICAgICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoZmlsZXBhdGgpO1xuICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSl7XG4gICAgICAgICAgICBmcy5ta2RpclN5bmMoZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZXBhdGgsIGJ1ZmZlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbQVBJXSBTYXZlZCBjYXB0dXJlZCBpbWFnZSB0bzogJHtmaWxlcGF0aH1gKTtcbiAgICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW0FQSV0gRmFpbGVkIHRvIHNhdmUgaW1hZ2UgdG8gZGlzazpcIiwgc2F2ZUVycm9yKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlbmRwb2ludCB8fCAhYXBpS2V5KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbQVBJXSBNaXNzaW5nIEF6dXJlIE9wZW5BSSBjcmVkZW50aWFsc1wiKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgW0FQSV0gU2VuZGluZyBpbWFnZSB0byBBenVyZSBPcGVuQUkgKCR7ZGVwbG95bWVudH0pLi4uYCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBBenVyZU9wZW5BSSh7XG4gICAgICAgIGVuZHBvaW50LFxuICAgICAgICBhcGlLZXksXG4gICAgICAgIGFwaVZlcnNpb24sXG4gICAgICAgIGRlcGxveW1lbnQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogZGVwbG95bWVudCxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgICAgICAgY29udGVudDogXCJZb3UgYXJlIGEgY29uY2lzZSB2aXN1YWwgYXNzaXN0YW50IGZvciB0aGUgZGVhZi1ibGluZC4gRGVzY3JpYmUgdGhlIG1vc3QgaW1wb3J0YW50IHRoaW5nIGluIHRoZSBpbWFnZSBpbiAzLTUgd29yZHMgb25seS5cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgIHVybDogaW1hZ2VEYXRhVXJsLFxuICAgICAgICAgICAgICAgICAgZGV0YWlsOiBkZXRhaWxMZXZlbCBhcyBcImxvd1wiIHwgXCJoaWdoXCIgfCBcImF1dG9cIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBtYXhfdG9rZW5zOiAyMCxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpbWFnZURlc2NyaXB0aW9uID0gcmVzcG9uc2UuY2hvaWNlc1swXS5tZXNzYWdlPy5jb250ZW50IHx8IFwiXCI7XG4gICAgICBjb25zb2xlLmxvZyhgW0FQSV0gQXp1cmUgT3BlbkFJIFJlc3BvbnNlOiBcIiR7aW1hZ2VEZXNjcmlwdGlvbn1cImApO1xuICAgIH1cblxuICAgIC8vIDIuIFByb2Nlc3MgQXVkaW8gd2l0aCBBenVyZSBTcGVlY2ggU0RLXG4gICAgLy8gTm90ZTogVGhpcyBleHBlY3RzIHRoZSBhdWRpb0Jsb2IgdG8gYmUgaW4gYSBmb3JtYXQgdGhlIFNESyBjYW4gaGFuZGxlICh1c3VhbGx5IFBDTS9XQVYpLlxuICAgIC8vIEJyb3dzZXJzIG9mdGVuIHNlbmQgV2ViTS4gSWYgdGhpcyBmYWlscywgY2xpZW50LXNpZGUgdHJhbnNjb2RpbmcgdG8gV0FWL1BDTSBpcyBuZWVkZWQuXG4gICAgaWYgKGF1ZGlvQmxvYiAmJiBzcGVlY2hLZXkgJiYgc3BlZWNoUmVnaW9uKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcHJvY2Vzc0F1ZGlvKGF1ZGlvQmxvYiwgc3BlZWNoS2V5LCBzcGVlY2hSZWdpb24pO1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIGF1ZGlvVGV4dCA9IHRleHQ7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiU3BlZWNoIHByb2Nlc3Npbmcgd2FybmluZzpcIiwgZXJyKTtcbiAgICAgICAgLy8gRG8gbm90IGZhaWwgdGhlIHdob2xlIHJlcXVlc3QgaWYgYXVkaW8gZmFpbHNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGltYWdlRGVzY3JpcHRpb24sXG4gICAgICBhdWRpb1RleHQsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUHJvY2Vzc2luZyBFcnJvcjpcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzQXVkaW8oYXVkaW9CbG9iOiBCbG9iLCBrZXk6IHN0cmluZywgcmVnaW9uOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGF1ZGlvQmxvYi5hcnJheUJ1ZmZlcigpO1xuICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XG4gIFxuICAvLyBDcmVhdGUgdGVtcCBmaWxlXG4gIGNvbnN0IHRlbXBGaWxlUGF0aCA9IHBhdGguam9pbihvcy50bXBkaXIoKSwgYGF1ZGlvXyR7RGF0ZS5ub3coKX0ud2VibWApO1xuICBmcy53cml0ZUZpbGVTeW5jKHRlbXBGaWxlUGF0aCwgYnVmZmVyKTtcbiAgXG4gIC8vIENyZWF0ZSB0aGUgcHVzaCBzdHJlYW1cbiAgY29uc3QgcHVzaFN0cmVhbSA9IHNkay5BdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVB1c2hTdHJlYW0oKTtcbiAgXG4gIC8vIFNwYXduIGZmbXBlZyB0byBjb252ZXJ0IHRvIFBDTVxuICAvLyBmZm1wZWcgLWkgaW5wdXQud2VibSAtZiBzMTZsZSAtYWNvZGVjIHBjbV9zMTZsZSAtYWMgMSAtYXIgMTYwMDAgcGlwZToxXG4gIGNvbnN0IGZmbXBlZyA9IHNwYXduKCdmZm1wZWcnLCBbXG4gICAgJy1pJywgdGVtcEZpbGVQYXRoLFxuICAgICctZicsICdzMTZsZScsXG4gICAgJy1hY29kZWMnLCAncGNtX3MxNmxlJyxcbiAgICAnLWFjJywgJzEnLFxuICAgICctYXInLCAnMTYwMDAnLFxuICAgICdwaXBlOjEnXG4gIF0pO1xuXG4gIGZmbXBlZy5zdGRvdXQub24oJ2RhdGEnLCAoY2h1bms6IEJ1ZmZlcikgPT4ge1xuICAgIC8vIFdyaXRlIGFycmF5IGJ1ZmZlciB0byBwdXNoIHN0cmVhbVxuICAgIC8vIEVuc3VyZSB3ZSBzZW5kIHRoZSBjb3JyZWN0IHNsaWNlIG9mIHRoZSBidWZmZXJcbiAgICBjb25zdCBhcnJheUJ1ZiA9IGNodW5rLmJ1ZmZlci5zbGljZShjaHVuay5ieXRlT2Zmc2V0LCBjaHVuay5ieXRlT2Zmc2V0ICsgY2h1bmsuYnl0ZUxlbmd0aCk7XG4gICAgcHVzaFN0cmVhbS53cml0ZShhcnJheUJ1ZiBhcyBBcnJheUJ1ZmZlcik7XG4gIH0pO1xuXG4gIGZmbXBlZy5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAvLyBjb25zb2xlLmVycm9yKGBmZm1wZWcgc3RkZXJyOiAke2RhdGF9YCk7XG4gIH0pO1xuICBcbiAgZmZtcGVnLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XG4gICAgIGNvbnNvbGUubG9nKGBbQVBJXSBmZm1wZWcgZXhpdGVkIHdpdGggY29kZSAke2NvZGV9YCk7XG4gICAgIHB1c2hTdHJlYW0uY2xvc2UoKTtcbiAgICAgLy8gQ2xlYW51cCB0ZW1wIGZpbGVcbiAgICAgdHJ5IHsgXG4gICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyh0ZW1wRmlsZVBhdGgpKSBmcy51bmxpbmtTeW5jKHRlbXBGaWxlUGF0aCk7IFxuICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB0ZW1wIGZpbGU6XCIsIGUpO1xuICAgICB9XG4gIH0pO1xuXG4gIC8vIENvbmZpZ3VyZSBmb3IgYXVkaW8gaW5wdXRcbiAgY29uc3QgYXVkaW9Db25maWcgPSBzZGsuQXVkaW9Db25maWcuZnJvbVN0cmVhbUlucHV0KHB1c2hTdHJlYW0pO1xuICBjb25zdCBzcGVlY2hDb25maWcgPSBzZGsuU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb24oa2V5LCByZWdpb24pO1xuICBzcGVlY2hDb25maWcuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSA9IFwiZW4tVVNcIjtcbiAgXG4gIGNvbnN0IHJlY29nbml6ZXIgPSBuZXcgc2RrLlNwZWVjaFJlY29nbml6ZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICByZWNvZ25pemVyLnJlY29nbml6ZU9uY2VBc3luYyhcbiAgICAgIChyZXN1bHQpID0+IHtcbiAgICAgICAgcmVjb2duaXplci5jbG9zZSgpO1xuICAgICAgICBpZiAocmVzdWx0LnJlYXNvbiA9PT0gc2RrLlJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlZWNoKSB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQudGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJTcGVlY2ggcmVjb2duaXRpb24gZmFpbGVkIG9yIG5vIHNwZWVjaDpcIiwgcmVzdWx0LmVycm9yRGV0YWlscyk7XG4gICAgICAgICAgcmVzb2x2ZShcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIChlcnIpID0+IHtcbiAgICAgICAgcmVjb2duaXplci5jbG9zZSgpO1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVjb2duaXplciBlcnJvcjpcIiwgZXJyKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiQXp1cmVPcGVuQUkiLCJzZGsiLCJmcyIsInBhdGgiLCJzcGF3biIsIm9zIiwiZW5kcG9pbnQiLCJwcm9jZXNzIiwiZW52IiwiQVpVUkVfT1BFTkFJX0VORFBPSU5UIiwiYXBpS2V5IiwiQVpVUkVfT1BFTkFJX0tFWSIsImRlcGxveW1lbnQiLCJBWlVSRV9PUEVOQUlfREVQTE9ZTUVOVF9JRCIsImFwaVZlcnNpb24iLCJzcGVlY2hLZXkiLCJBWlVSRV9TUEVFQ0hfS0VZIiwic3BlZWNoUmVnaW9uIiwiQVpVUkVfU1BFRUNIX1JFR0lPTiIsIlBPU1QiLCJyZXEiLCJmb3JtRGF0YSIsImltYWdlRGF0YVVybCIsImdldCIsImRldGFpbExldmVsIiwiYXVkaW9CbG9iIiwiaW1hZ2VEZXNjcmlwdGlvbiIsImF1ZGlvVGV4dCIsImNvbnNvbGUiLCJsb2ciLCJzdGFydHNXaXRoIiwiYmFzZTY0RGF0YSIsInJlcGxhY2UiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImZpbGVuYW1lIiwiZmlsZXBhdGgiLCJqb2luIiwiY3dkIiwiZGlyIiwiZGlybmFtZSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJ3cml0ZUZpbGVTeW5jIiwic2F2ZUVycm9yIiwiZXJyb3IiLCJFcnJvciIsImNsaWVudCIsInJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidHlwZSIsImltYWdlX3VybCIsInVybCIsImRldGFpbCIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImNob2ljZXMiLCJtZXNzYWdlIiwidGV4dCIsInByb2Nlc3NBdWRpbyIsImVyciIsImpzb24iLCJzdWNjZXNzIiwic3RhdHVzIiwia2V5IiwicmVnaW9uIiwiYXJyYXlCdWZmZXIiLCJ0ZW1wRmlsZVBhdGgiLCJ0bXBkaXIiLCJwdXNoU3RyZWFtIiwiQXVkaW9JbnB1dFN0cmVhbSIsImNyZWF0ZVB1c2hTdHJlYW0iLCJmZm1wZWciLCJzdGRvdXQiLCJvbiIsImNodW5rIiwiYXJyYXlCdWYiLCJzbGljZSIsImJ5dGVPZmZzZXQiLCJieXRlTGVuZ3RoIiwid3JpdGUiLCJzdGRlcnIiLCJkYXRhIiwiY29kZSIsImNsb3NlIiwidW5saW5rU3luYyIsImUiLCJhdWRpb0NvbmZpZyIsIkF1ZGlvQ29uZmlnIiwiZnJvbVN0cmVhbUlucHV0Iiwic3BlZWNoQ29uZmlnIiwiU3BlZWNoQ29uZmlnIiwiZnJvbVN1YnNjcmlwdGlvbiIsInNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UiLCJyZWNvZ25pemVyIiwiU3BlZWNoUmVjb2duaXplciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVjb2duaXplT25jZUFzeW5jIiwicmVzdWx0IiwicmVhc29uIiwiUmVzdWx0UmVhc29uIiwiUmVjb2duaXplZFNwZWVjaCIsImVycm9yRGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/process/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/microsoft-cognitiveservices-speech-sdk","vendor-chunks/openai","vendor-chunks/uuid","vendor-chunks/ws","vendor-chunks/debug","vendor-chunks/bytesish","vendor-chunks/bent","vendor-chunks/supports-color","vendor-chunks/ms","vendor-chunks/is-stream","vendor-chunks/has-flag","vendor-chunks/caseless"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fedwarddeng%2Frepos%2Fhackathon2.0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();